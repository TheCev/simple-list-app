"use strict";(self.webpackChunksimple_list=self.webpackChunksimple_list||[]).push([[106],{9106:(F,h,o)=>{o.r(h),o.d(h,{TasksModule:()=>P});var c=o(8583),d=o(4655),t=o(7716),u=o(1841),p=o(5304),k=o(3173);let T=(()=>{class e{constructor(s,n){this.http=s,this.api=n,this.token=this.api.getToken(),this.apiUrl=this.api.apiUrl,this.httpOptions={headers:new u.WM({Authorization:"Bearer "+this.token})}}getList(s){return this.http.get(`${this.apiUrl}/lists/${s}`,this.httpOptions).pipe((0,p.K)(n=>this.api.handleError(n)))}getTasks(s,n){return this.http.get(`${this.apiUrl}/tasks/user/${s}/list/${n}`,this.httpOptions).pipe((0,p.K)(a=>this.api.handleError(a)))}sendTask(s,n,a){return this.http.post(`${this.apiUrl}/tasks`,{userId:s,listId:n,title:a,state:!1},this.httpOptions)}deleteTask(s){return this.http.delete(`${this.apiUrl}/tasks/${s}`,this.httpOptions).pipe((0,p.K)(a=>this.api.handleError(a)))}changeState(s,n){return this.http.put(this.apiUrl+`/tasks/${n.id}/state`,n,this.httpOptions).pipe((0,p.K)(l=>this.api.handleError(l)))}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(u.eN),t.LFG(k.Q))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var r=o(2238),f=o(8295),v=o(9983),g=o(1095);let C=(()=>{class e{constructor(s){this.dialogRef=s}onNoClick(){this.dialogRef.close()}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(r.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-task-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","","placeholder","Title"],["title",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close"]],template:function(s,n){if(1&s&&(t.TgZ(0,"h2",0),t._uU(1,"Create a New Task"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"mat-form-field"),t._UZ(4,"input",2,3),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.onNoClick()}),t._uU(8,"Cancel"),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Add"),t.qZA(),t.qZA()),2&s){const a=t.MAs(5);t.xp6(9),t.Q6J("mat-dialog-close",a.value)}},directives:[r.uh,r.xY,f.KE,v.Nt,r.H8,g.lW,r.ZT],styles:[""]}),e})();var Z=o(6627);let A=(()=>{class e{constructor(s){this.dialog=s,this.newTask=new t.vpe}openDialog(){this.dialog.open(C,{width:"300px"}).afterClosed().subscribe(n=>{""!=n&&this.newTask.emit(n)})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(r.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-tasks-button"]],inputs:{listId:"listId"},outputs:{newTask:"newTask"},decls:3,vars:0,consts:[["mat-icon-button","",3,"click"],["color","primary"]],template:function(s,n){1&s&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.openDialog()}),t.TgZ(1,"mat-icon",1),t._uU(2,"add_circle"),t.qZA(),t.qZA())},directives:[g.lW,Z.Hw],styles:[".mat-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:85px}.mat-icon-button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:3rem}"]}),e})();var x=o(4885),I=o(2178);let b=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-progress-bar"]],inputs:{length:"length"},decls:1,vars:1,consts:[["mode","determinate","color","warn",3,"value"]],template:function(s,n){1&s&&t._UZ(0,"mat-progress-bar",0),2&s&&t.Q6J("value",n.length)},directives:[I.pW],styles:[""]}),e})();var m=o(9992),w=o(7991);function y(e,i){1&e&&t._UZ(0,"mat-spinner")}function U(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"p",5),t._uU(2),t.qZA(),t._UZ(3,"app-progress-bar",6),t.qZA()),2&e){const s=t.oxw();t.xp6(2),t.Oqu(s.tasksDone.length+"/"+s.tasks.length||0),t.xp6(1),t.Q6J("length",s.percentage)}}function O(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"mat-list-option",10),t.NdJ("click",function(){t.CHM(s);const a=i.$implicit;return t.oxw(2).changeState(a)}),t._uU(2),t.qZA(),t.TgZ(3,"app-options-button",11),t.NdJ("deleteItem",function(a){return t.CHM(s),t.oxw(2).deleteTask(a)}),t.qZA(),t.qZA()}if(2&e){const s=i.$implicit;t.xp6(1),t.s9C("selected",s.state),t.xp6(1),t.hij(" ",s.title," "),t.xp6(1),t.Q6J("itemId",s.id)}}function M(e,i){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-selection-list",null,7),t.YNc(3,O,4,3,"div",8),t.qZA(),t.qZA()),2&e){const s=t.oxw();t.xp6(3),t.Q6J("ngForOf",s.tasks)}}const S=[{path:"",component:(()=>{class e{constructor(s,n){this.route=s,this.tasksSvc=n,this.list={title:""},this.tasks=[],this.percentage=0,this.tasksDone=[],this.loading=!0,this.userId=JSON.parse(localStorage.getItem("user")).userId}showTasks(){this.loading=!0,this.tasksSvc.getTasks(this.userId,this.listId).subscribe(s=>{this.tasks=s,this.updatePercentage(),this.loading=!1})}getList(){this.tasksSvc.getList(this.listId).subscribe(s=>{this.list=s,this.loading=!1})}addNewTask(s){this.tasksSvc.sendTask(this.userId,this.listId,s).subscribe(n=>{this.showTasks(),this.updatePercentage()})}changeState(s){this.loading=!0,this.tasksSvc.changeState(this.listId,s).subscribe(n=>{this.showTasks()})}deleteTask(s){this.loading=!0,this.tasksSvc.deleteTask(s).subscribe(n=>{this.showTasks(),this.updatePercentage()})}updatePercentage(){this.tasksDone=this.tasks.filter(s=>!0===s.state),this.percentage=this.tasksDone.length/this.tasks.length*100}ngOnInit(){this.route.params.subscribe(s=>{this.listId=s.listId,this.showTasks(),this.getList()})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(d.gz),t.Y36(T))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tasks"]],decls:8,vars:5,consts:[[1,"container"],[1,"list-title"],[4,"ngIf"],["class","container",4,"ngIf"],[3,"listId","newTask"],[1,"text"],[3,"length"],["tasksList",""],["class","flexbox",4,"ngFor","ngForOf"],[1,"flexbox"],[3,"selected","click"],[3,"itemId","deleteItem"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.qZA(),t.qZA(),t.YNc(3,y,1,0,"mat-spinner",2),t.YNc(4,U,4,2,"div",3),t.YNc(5,M,4,1,"div",3),t.TgZ(6,"div",0),t.TgZ(7,"app-add-tasks-button",4),t.NdJ("newTask",function(l){return n.addNewTask(l)}),t.qZA(),t.qZA()),2&s&&(t.xp6(2),t.Oqu(n.list.title),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.tasks&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.tasks&&!n.loading),t.xp6(2),t.Q6J("listId",n.listId))},directives:[c.O5,A,x.$g,b,m.Ub,c.sg,m.vS,w.A],styles:[".container[_ngcontent-%COMP%]{width:90%;max-width:500px;margin:2rem auto}.flexbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.mat-spinner[_ngcontent-%COMP%]{margin:1rem auto}.list-title[_ngcontent-%COMP%]{font-size:30px;font-weigth:bold}.mat-list-option[_ngcontent-%COMP%]{font-size:20px}.text[_ngcontent-%COMP%]{font-size:18px}"]}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.Bz.forChild(S)],d.Bz]}),e})();var J=o(3806),N=o(4466);let P=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.ez,_,J.q,N.m]]}),e})()}}]);