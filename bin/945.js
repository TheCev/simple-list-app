"use strict";(self.webpackChunksimple_list=self.webpackChunksimple_list||[]).push([[945],{8945:(z,h,a)=>{a.r(h),a.d(h,{ListsModule:()=>R});var d=a(8583),u=a(4655),t=a(7716),l=a(2238),p=a(1095);let C=(()=>{class s{constructor(e){this.dialogRef=e}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.so))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-delete-dialog"]],decls:9,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"mat-dialog-close"]],template:function(e,n){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"Delete a List"),t.qZA(),t.TgZ(2,"div",1),t._uU(3,"Are you sure?."),t.qZA(),t.TgZ(4,"div",2),t.TgZ(5,"button",3),t._uU(6,"Close"),t.qZA(),t.TgZ(7,"button",4),t._uU(8,"Delete"),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("mat-dialog-close",!0))},directives:[l.uh,l.xY,l.H8,p.lW,l.ZT],styles:[""]}),s})();var v=a(6686),A=a(629),b=a(205),c=a(5304),x=a(1841);let f=(()=>{class s{constructor(e){this.http=e,this.token=localStorage.getItem("token"),this.user=JSON.parse(localStorage.getItem("user")),this.apiUrl="/api",this.httpOptions={headers:{Authorization:"Bearer "+this.token}}}handleError(e){return console.error("An error ocurred: ",e.error.message),window.alert(e.error.message),(0,b._)("SOMETHING BAD HAPPENED")}getList(e){return this.http.get(`${this.apiUrl}/lists/${e}`,this.httpOptions).pipe((0,c.K)(n=>this.handleError(n)))}getTasks(e){return this.http.get(`${this.apiUrl}/tasks/user/${this.user.userId}/list/${e}`,this.httpOptions).pipe((0,c.K)(n=>this.handleError(n)))}sendList(e,n){return this.http.post(`${this.apiUrl}/lists/`,{title:n,userId:e},this.httpOptions).pipe((0,c.K)(r=>this.handleError(r)))}sendTask(e,n){return this.http.post(`${this.apiUrl}/tasks`,{userId:this.user.userId,listId:e,title:n,state:!1},this.httpOptions)}getLists(e){return this.http.get(`${this.apiUrl}/lists/user/${e}`,this.httpOptions).pipe((0,c.K)(n=>this.handleError(n)))}deleteList(e){return this.http.delete(`${this.apiUrl}/lists/${e}`,this.httpOptions).pipe((0,c.K)(n=>this.handleError(n)))}deleteTask(e){return this.http.delete(`${this.apiUrl}/tasks/${e}`,this.httpOptions).pipe((0,c.K)(o=>this.handleError(o)))}changeState(e,n){return this.http.put(this.apiUrl+`/tasks/${n.id}/state`,n,this.httpOptions).pipe((0,c.K)(r=>this.handleError(r)))}checkUser(){return this.http.get(`${this.apiUrl}/auth`,this.httpOptions).pipe((0,c.K)(e=>this.handleError(e)))}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(x.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var L=a(2794),T=a(8295),_=a(9983);let w=(()=>{class s{constructor(e){this.dialogRef=e,this.onNoClick=()=>this.dialogRef.close()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.so))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-list-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","","placeholder","Title"],["title",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Create a New To Do List"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"mat-form-field"),t._UZ(4,"input",2,3),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.onNoClick()}),t._uU(8,"Cancel"),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Add"),t.qZA(),t.qZA()),2&e){const o=t.MAs(5);t.xp6(9),t.Q6J("mat-dialog-close",o.value)}},directives:[l.uh,l.xY,T.KE,_.Nt,l.H8,p.lW,l.ZT],styles:[""]}),s})();var m=a(6627);let y=(()=>{class s{constructor(e){this.dialog=e,this.newList=new t.vpe}ngOnInit(){}openDialog(){this.dialog.open(w,{width:"300px"}).afterClosed().subscribe(n=>{this.newList.emit(n)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.uw))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-button"]],inputs:{listId:"listId"},outputs:{newList:"newList"},decls:3,vars:0,consts:[["mat-icon-button","",3,"click"],["color","primary"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.openDialog()}),t.TgZ(1,"mat-icon",1),t._uU(2,"add_circle"),t.qZA(),t.qZA())},directives:[p.lW,m.Hw],styles:[".mat-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:85px}.mat-icon-button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:3rem}"]}),s})();var k=a(4885),g=a(9992);let Z=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-delete-button"]],decls:3,vars:0,consts:[["mat-icon-button","","color","warn"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.TgZ(1,"mat-icon"),t._uU(2,"delete_outlined"),t.qZA(),t.qZA())},directives:[p.lW,m.Hw],styles:[""]}),s})();function I(s,i){1&s&&t._UZ(0,"mat-spinner")}function O(s,i){if(1&s){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",7),t.TgZ(2,"button",8),t.TgZ(3,"div",9),t._uU(4),t.qZA(),t.qZA(),t.TgZ(5,"app-delete-button",10),t.NdJ("click",function(){t.CHM(e);const o=i.$implicit;return t.oxw(2).openDialog(o.id)}),t.qZA(),t.qZA(),t.BQk()}if(2&s){const e=i.$implicit;t.xp6(2),t.MGl("routerLink","tasks/",e.id,""),t.xp6(2),t.Oqu(e.title)}}function U(s,i){1&s&&(t.TgZ(0,"mat-list-item",11),t.TgZ(1,"h5",12),t._uU(2,"There aren't lists"),t.qZA(),t.qZA())}function D(s,i){if(1&s&&(t.TgZ(0,"mat-action-list",0),t.YNc(1,O,6,2,"ng-container",5),t.YNc(2,U,3,0,"mat-list-item",6),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.lists),t.xp6(1),t.Q6J("ngIf",!e.lists.length)}}new v.N0;let N=(()=>{class s{constructor(e,n,o,r){this.authSvc=e,this.listSvc=n,this.dialog=o,this.snackBar=r,this.lists=[],this.userId=JSON.parse(localStorage.getItem("user")).userId,this.loading=!0}getLists(){this.loading=!0,this.listSvc.getLists(this.userId).subscribe(e=>{this.loading=!1,this.lists=e})}addNewList(e){this.listSvc.sendList(this.userId,e).subscribe(n=>{this.getLists(),this.openSnackBar("A list has been added")})}openSnackBar(e){this.snackBar.open(e,"",{duration:3e3})}deleteList(e){this.listSvc.deleteList(e).subscribe(()=>{this.openSnackBar("A list has been deleted"),this.getLists()})}openDialog(e){this.dialog.open(C,{width:"300px"}).afterClosed().subscribe(o=>{!0===o&&this.deleteList(e)})}ngOnInit(){this.getLists()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(A.e),t.Y36(f),t.Y36(l.uw),t.Y36(L.ux))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-lists"]],decls:7,vars:2,consts:[[1,"container"],[1,"subtitle"],[4,"ngIf"],["class","container",4,"ngIf"],[3,"newList"],[4,"ngFor","ngForOf"],["disabled","",4,"ngIf"],[1,"flexbox"],["mat-list-item","",3,"routerLink"],[1,"mat-list-item-text"],[3,"click"],["disabled",""],[2,"text-align","center"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"To Do Lists "),t.qZA(),t.qZA(),t.YNc(3,I,1,0,"mat-spinner",2),t.YNc(4,D,3,2,"mat-action-list",3),t.TgZ(5,"div",0),t.TgZ(6,"app-add-button",4),t.NdJ("newList",function(r){return n.addNewList(r)}),t.qZA(),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",!n.loading))},directives:[d.O5,y,k.$g,g.i$,d.sg,g.Tg,u.rH,Z],styles:[".subtitle[_ngcontent-%COMP%]{font-size:2rem;text-align:center}.container[_ngcontent-%COMP%]{margin:1rem auto;width:90%;max-width:500px}.mat-icon-button[_ngcontent-%COMP%]{display:inline-block}.mat-list-item[_ngcontent-%COMP%]{display:inline-block}.flexbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:between}.mat-spinner[_ngcontent-%COMP%]{margin:1rem auto}.mat-list-item-text[_ngcontent-%COMP%]{font-size:20px}"]}),s})(),M=(()=>{class s{constructor(e){this.dialogRef=e}onNoClick(){this.dialogRef.close()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.so))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-task-dialog"]],decls:11,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","","placeholder","Title"],["title",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close"]],template:function(e,n){if(1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Create a New Task"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"mat-form-field"),t._UZ(4,"input",2,3),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.onNoClick()}),t._uU(8,"Cancel"),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Add"),t.qZA(),t.qZA()),2&e){const o=t.MAs(5);t.xp6(9),t.Q6J("mat-dialog-close",o.value)}},directives:[l.uh,l.xY,T.KE,_.Nt,l.H8,p.lW,l.ZT],styles:[""]}),s})(),q=(()=>{class s{constructor(e){this.dialog=e,this.newTask=new t.vpe}openDialog(){this.dialog.open(M,{width:"300px"}).afterClosed().subscribe(n=>{""!=n&&this.newTask.emit(n)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(l.uw))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-tasks-button"]],inputs:{listId:"listId"},outputs:{newTask:"newTask"},decls:3,vars:0,consts:[["mat-icon-button","",3,"click"],["color","primary"]],template:function(e,n){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.openDialog()}),t.TgZ(1,"mat-icon",1),t._uU(2,"add_circle"),t.qZA(),t.qZA())},directives:[p.lW,m.Hw],styles:[".mat-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:85px}.mat-icon-button[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:3rem}"]}),s})();var B=a(2178);let S=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-progress-bar"]],inputs:{length:"length"},decls:1,vars:1,consts:[["mode","determinate","color","warn",3,"value"]],template:function(e,n){1&e&&t._UZ(0,"mat-progress-bar",0),2&e&&t.Q6J("value",n.length)},directives:[B.pW],styles:[""]}),s})();function J(s,i){1&s&&t._UZ(0,"mat-spinner")}function P(s,i){if(1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"p",5),t._uU(2),t.qZA(),t._UZ(3,"app-progress-bar",6),t.qZA()),2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.tasksDone.length+"/"+e.tasks.length||0),t.xp6(1),t.Q6J("length",e.percentage)}}function Y(s,i){if(1&s){const e=t.EpF();t.TgZ(0,"div",9),t.TgZ(1,"mat-list-option",10),t.NdJ("click",function(){t.CHM(e);const o=i.$implicit;return t.oxw(2).changeState(o)}),t._uU(2),t.qZA(),t.TgZ(3,"app-delete-button",11),t.NdJ("click",function(){t.CHM(e);const o=i.$implicit;return t.oxw(2).deleteTask(o.id)}),t.qZA(),t.qZA()}if(2&s){const e=i.$implicit;t.xp6(1),t.s9C("selected",e.state),t.xp6(1),t.hij(" ",e.title," ")}}function $(s,i){if(1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-selection-list",null,7),t.YNc(3,Y,4,2,"div",8),t.qZA(),t.qZA()),2&s){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.tasks)}}const F=[{path:"",component:N},{path:"tasks/:listId",component:(()=>{class s{constructor(e,n){this.route=e,this.listSvc=n,this.list={title:""},this.tasks=[],this.percentage=0,this.tasksDone=[],this.loading=!0}showTasks(){this.loading=!0,this.listSvc.getTasks(this.listId).subscribe(e=>{this.tasks=e,this.updatePercentage(),this.loading=!1})}getList(){this.listSvc.getList(this.listId).subscribe(e=>{this.list=e,this.loading=!1})}addNewTask(e){this.listSvc.sendTask(this.listId,e).subscribe(n=>{this.showTasks(),this.updatePercentage()})}changeState(e){this.loading=!0,this.listSvc.changeState(this.listId,e).subscribe(n=>{this.showTasks()})}deleteTask(e){this.loading=!0,this.listSvc.deleteTask(e).subscribe(n=>{this.showTasks(),this.updatePercentage()})}updatePercentage(){this.tasksDone=this.tasks.filter(e=>!0===e.state),this.percentage=this.tasksDone.length/this.tasks.length*100}ngOnInit(){this.route.params.subscribe(e=>{this.listId=e.listId,this.showTasks(),this.getList()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(u.gz),t.Y36(f))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-tasks"]],decls:8,vars:5,consts:[[1,"container"],[1,"list-title"],[4,"ngIf"],["class","container",4,"ngIf"],[3,"listId","newTask"],[1,"text"],[3,"length"],["tasksList",""],["class","flexbox",4,"ngFor","ngForOf"],[1,"flexbox"],[3,"selected","click"],[3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.qZA(),t.qZA(),t.YNc(3,J,1,0,"mat-spinner",2),t.YNc(4,P,4,2,"div",3),t.YNc(5,$,4,1,"div",3),t.TgZ(6,"div",0),t.TgZ(7,"app-add-tasks-button",4),t.NdJ("newTask",function(r){return n.addNewTask(r)}),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Oqu(n.list.title),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.tasks&&!n.loading),t.xp6(1),t.Q6J("ngIf",n.tasks&&!n.loading),t.xp6(2),t.Q6J("listId",n.listId))},directives:[d.O5,q,k.$g,S,g.Ub,d.sg,g.vS,Z],styles:[".container[_ngcontent-%COMP%]{width:90%;max-width:500px;margin:2rem auto}.flexbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.mat-spinner[_ngcontent-%COMP%]{margin:1rem auto}.list-title[_ngcontent-%COMP%]{font-size:30px;font-weigth:bold}.mat-list-option[_ngcontent-%COMP%]{font-size:20px}.text[_ngcontent-%COMP%]{font-size:18px}"]}),s})()}];let E=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[u.Bz.forChild(F)],u.Bz]}),s})();var Q=a(3806);let R=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[d.ez,E,Q.q]]}),s})()}}]);