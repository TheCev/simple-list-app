"use strict";(self.webpackChunksimple_list=self.webpackChunksimple_list||[]).push([[198],{8198:(R,m,a)=>{a.r(m),a.d(m,{TasksModule:()=>Q});var d=a(8583),c=a(4655),h=a(5319),t=a(7716),g=a(1841),C=a(9765),u=a(5304),_=a(3173);let T=(()=>{class e{constructor(s,i){this.http=s,this.api=i,this.addTaskEvent=new C.xQ,this.token=this.api.getToken(),this.apiUrl=this.api.apiUrl,this.httpOptions={headers:new g.WM({Authorization:"Bearer "+this.token})}}sendAddTaskEvent(){this.addTaskEvent.next()}getAddTaskEvent(){return this.addTaskEvent.asObservable()}getList(s){return this.http.get(`${this.apiUrl}/lists/${s}`,this.httpOptions).pipe((0,u.K)(i=>this.api.handleError(i)))}getTasks(s,i){return this.http.get(`${this.apiUrl}/tasks/user/${s}/list/${i}`,this.httpOptions).pipe((0,u.K)(o=>this.api.handleError(o)))}sendTask(s,i,o){return this.http.post(`${this.apiUrl}/tasks`,{userId:s,listId:i,title:o,state:!1},this.httpOptions)}deleteTask(s){return this.http.delete(`${this.apiUrl}/tasks/${s}`,this.httpOptions).pipe((0,u.K)(o=>this.api.handleError(o)))}changeState(s,i){return this.http.put(this.apiUrl+`/tasks/${i.id}/state`,i,this.httpOptions).pipe((0,u.K)(l=>this.api.handleError(l)))}editTask(s,i){return this.http.put(`${this.apiUrl}/tasks/${s}`,{title:i},this.httpOptions)}}return e.\u0275fac=function(s){return new(s||e)(t.LFG(g.eN),t.LFG(_.Q))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var r=a(2238),p=a(3679),k=a(8295),Z=a(9983);function b(e,n){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"The title cannot be more than 40 characters"),t.qZA())}let f=(()=>{class e{constructor(){this.title=new t.vpe,this.inputInvalid=new t.vpe,this.titleInput=new p.NI("",[p.kI.required,p.kI.maxLength(40)])}ngOnInit(){}sendTitle(){this.title.emit(this.titleInput.value)}checkTitleInput(){return!(!this.titleInput.hasError("maxlength")||!this.titleInput.dirty||(this.inputInvalid.emit(!0),0))}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-title-input"]],outputs:{title:"title",inputInvalid:"inputInvalid"},decls:4,vars:2,consts:[["matInput","","placeholder","Insert Title",3,"formControl","input"],["title",""],[4,"ngIf"]],template:function(s,i){1&s&&(t.TgZ(0,"mat-form-field"),t.TgZ(1,"input",0,1),t.NdJ("input",function(){return i.sendTitle()}),t.qZA(),t.qZA(),t.YNc(3,b,2,0,"mat-error",2)),2&s&&(t.xp6(1),t.Q6J("formControl",i.titleInput),t.xp6(2),t.Q6J("ngIf",i.checkTitleInput()))},directives:[k.KE,Z.Nt,p.Fj,p.JJ,p.oH,d.O5,k.TO],styles:[""]}),e})();var v=a(1095);let A=(()=>{class e{constructor(s){this.dialogRef=s}onNoClick(){this.dialogRef.close()}checkInvalid(s){this.invalid=s}getTitle(s){this.title=s}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(r.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-edit-task-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"title","inputInvalid"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(s,i){1&s&&(t.TgZ(0,"h2",0),t._uU(1,"Edit Task"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"app-title-input",2),t.NdJ("title",function(l){return i.getTitle(l)})("inputInvalid",function(l){return i.checkInvalid(l)}),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.onNoClick()}),t._uU(6,"Cancel"),t.qZA(),t.TgZ(7,"button",5),t._uU(8,"Edit"),t.qZA(),t.qZA()),2&s&&(t.xp6(7),t.Q6J("mat-dialog-close",i.title)("disabled",i.invalid))},directives:[r.uh,r.xY,f,r.H8,v.lW,r.ZT],styles:[""]}),e})(),x=(()=>{class e{constructor(s){this.dialogRef=s}onNoClick(){this.dialogRef.close()}checkInvalid(s){this.invalid=s}getTitle(s){this.title=s}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(r.so))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-task-dialog"]],decls:9,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"title","invalidInput"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(s,i){1&s&&(t.TgZ(0,"h2",0),t._uU(1,"Create a New Task"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"app-title-input",2),t.NdJ("title",function(l){return i.getTitle(l)})("invalidInput",function(l){return i.checkInvalid(l)}),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.onNoClick()}),t._uU(6,"Cancel"),t.qZA(),t.TgZ(7,"button",5),t._uU(8,"Add"),t.qZA(),t.qZA()),2&s&&(t.xp6(7),t.Q6J("mat-dialog-close",i.title)("disabled",i.invalid))},directives:[r.uh,r.xY,f,r.H8,v.lW,r.ZT],styles:[""]}),e})();var O=a(2178);let y=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-progress-bar"]],inputs:{tasksDone:"tasksDone",totalTasks:"totalTasks"},decls:3,vars:2,consts:[[1,"text"],["mode","determinate","color","warn",3,"value"]],template:function(s,i){1&s&&(t.TgZ(0,"p",0),t._uU(1),t.qZA(),t._UZ(2,"mat-progress-bar",1)),2&s&&(t.xp6(1),t.Oqu(i.tasksDone+"/"+i.totalTasks||0),t.xp6(1),t.Q6J("value",i.tasksDone/i.totalTasks*100))},directives:[O.pW],styles:[""]}),e})();var I=a(9992),D=a(7991),S=a(4885);function J(e,n){if(1&e&&(t.TgZ(0,"div",2),t._UZ(1,"app-progress-bar",3),t.qZA()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("tasksDone",s.tasksDone.length)("totalTasks",s.tasks.length)}}function U(e,n){if(1&e){const s=t.EpF();t.TgZ(0,"div",6),t.TgZ(1,"mat-list-option",7),t.NdJ("click",function(){t.CHM(s);const o=n.$implicit;return t.oxw(2).changeState(o)}),t._uU(2),t.qZA(),t.TgZ(3,"app-options-button",8),t.NdJ("editItem",function(){t.CHM(s);const o=n.$implicit;return t.oxw(2).openEditTaskDialog(o.id)})("deleteItem",function(o){return t.CHM(s),t.oxw(2).deleteTask(o)}),t.qZA(),t.qZA()}if(2&e){const s=n.$implicit;t.xp6(1),t.s9C("selected",s.state),t.xp6(1),t.hij(" ",s.title," "),t.xp6(1),t.Q6J("itemId",s.id)}}function E(e,n){if(1&e&&(t.TgZ(0,"mat-selection-list",null,4),t.YNc(2,U,4,3,"div",5),t.qZA()),2&e){const s=t.oxw();t.xp6(2),t.Q6J("ngForOf",s.tasks)}}function N(e,n){1&e&&t._UZ(0,"mat-spinner")}let w=(()=>{class e{constructor(s,i,o){this.tasksSvc=s,this.route=i,this.dialog=o,this.load=!1,this.tasks=[],this.tasksDone=[],this.subscriptions=new h.w,this.subscriptions.add(this.tasksSvc.getAddTaskEvent().subscribe(()=>{this.load=!1,this.openAddTaskDialog()}))}showTasks(){this.load=!1;const s=JSON.parse(localStorage.getItem("user")).userId;this.subscriptions.add(this.tasksSvc.getTasks(s,this.listId).subscribe(i=>{this.tasks=i,this.getTasksDone(),this.load=!0}))}openAddTaskDialog(){this.dialog.open(x,{width:"300px"}).afterClosed().subscribe(i=>{i?this.addNewTask(i):this.load=!0})}addNewTask(s){const i=JSON.parse(localStorage.getItem("user")).userId;this.load=!1,this.tasksSvc.sendTask(i,this.listId,s).subscribe(()=>{this.showTasks()})}deleteTask(s){this.load=!1,this.subscriptions.add(this.tasksSvc.deleteTask(s).subscribe(i=>{this.showTasks()}))}openEditTaskDialog(s){const i=this.dialog.open(A,{width:"300px"});this.subscriptions.add(i.afterClosed().subscribe(o=>{o&&this.editList(s,o)}))}editList(s,i){this.load=!1,this.subscriptions.add(this.tasksSvc.editTask(s,i).subscribe(()=>{this.showTasks()}))}ngOnInit(){this.showTasks()}ngOnDestroy(){this.subscriptions.unsubscribe()}getTasksDone(){this.tasksDone=this.tasks.filter(s=>s.state)}changeState(s){this.subscriptions.add(this.tasksSvc.changeState(this.listId,s).subscribe())}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(T),t.Y36(c.gz),t.Y36(r.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list"]],inputs:{listId:"listId"},decls:3,vars:3,consts:[["class","container",4,"ngIf"],[4,"ngIf"],[1,"container"],[3,"tasksDone","totalTasks"],["tasksList",""],["class","flexbox",4,"ngFor","ngForOf"],[1,"flexbox"],[3,"selected","click"],[3,"itemId","editItem","deleteItem"]],template:function(s,i){1&s&&(t.YNc(0,J,2,2,"div",0),t.YNc(1,E,3,1,"mat-selection-list",1),t.YNc(2,N,1,0,"mat-spinner",1)),2&s&&(t.Q6J("ngIf",i.load),t.xp6(1),t.Q6J("ngIf",i.load),t.xp6(1),t.Q6J("ngIf",!i.load))},directives:[d.O5,y,I.Ub,d.sg,I.vS,D.A,S.$g],styles:[".container[_ngcontent-%COMP%]{width:90%;max-width:500px;margin:2rem auto}.flexbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.mat-spinner[_ngcontent-%COMP%]{margin:1rem auto}.mat-list-option[_ngcontent-%COMP%]{font-size:20px}.text[_ngcontent-%COMP%]{font-size:18px}"]}),e})();var L=a(281);const M=[{path:"",component:(()=>{class e{constructor(s,i){this.route=s,this.tasksSvc=i,this.list={title:""},this.subscriptions=new h.w,this.userId=JSON.parse(localStorage.getItem("user")).userId}getList(){this.tasksSvc.getList(this.listId).subscribe(s=>{this.list=s})}handleAddTask(){this.tasksSvc.sendAddTaskEvent()}ngOnInit(){this.route.params.subscribe(s=>{this.listId=s.listId,this.getList()})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(c.gz),t.Y36(T))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tasks"]],decls:7,vars:2,consts:[[1,"container"],[1,"list-title"],[3,"listId"],[3,"click"]],template:function(s,i){1&s&&(t.TgZ(0,"div",0),t.TgZ(1,"h1",1),t._uU(2),t.qZA(),t.qZA(),t.TgZ(3,"div",0),t._UZ(4,"app-list",2),t.qZA(),t.TgZ(5,"div",0),t.TgZ(6,"app-add-button",3),t.NdJ("click",function(){return i.handleAddTask()}),t.qZA(),t.qZA()),2&s&&(t.xp6(2),t.Oqu(i.list.title),t.xp6(2),t.Q6J("listId",i.listId))},directives:[w,L.L],styles:[".container[_ngcontent-%COMP%]{width:90%;max-width:500px;margin:2rem auto}.flexbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.mat-spinner[_ngcontent-%COMP%]{margin:1rem auto}.list-title[_ngcontent-%COMP%]{font-size:30px;font-weigth:bold}.mat-list-option[_ngcontent-%COMP%]{font-size:20px}.text[_ngcontent-%COMP%]{font-size:18px}"]}),e})()}];let F=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(M)],c.Bz]}),e})();var P=a(3806),Y=a(4466),$=a(695);let Q=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,F,P.q,Y.m,$.ListsModule,p.UX]]}),e})()}}]);